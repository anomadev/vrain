En PHP, el alcance (scope) de una variable determina desde qué partes del programa se puede acceder a ella, existiendo principalmente el ámbito global (variables definidas fuera de funciones), el local (variables definidas dentro de funciones), y el estático (variables que retienen su valor entre múltiples llamadas a la función). El uso de la palabra clave `global` o del array superglobal `$GLOBALS` ([[8.2 Super Global Variables]]) permite importar variables globales del ámbito local. Los parámetros de función actúan siempre en ámbito local y no están disponibles fuera de la función. Además, las `arrow functions` ([[6.7 Arrow Functions]]) introducidas en PHP 7.4 ([[1.1 What is PHP]]) vinculan automáticamente variables del scope padre, facilitando el acceso al contexto exterior dentro de la función. Finalmente, cuando se incluye un archivo con `include` o `require` ([[7.1 Include and Require Files]]), el contenido hereda el scope de la línea donde ocurre la inclusión, manteniendo disponible el conjunto de variables existentes en ese punto.
### Definición
El **ámbito (scope) de una variable** es el contexto dentro del cual la variable esta definida y accesible. PHP distingue principalmente entre:
- **Scope global**: variables definidas fuera de cualquier función, accesibles en el script principal.
- **Scope local (función)**: variables definidas dentro de una función, accesibles solo dentro de su cuerpo.
- **Scope estático**: variables definidas con la palabra clave `static` ([[11.4 Access Specifiers]]), que conservan su valor entre llamadas sucesivas a la misma función.
- **Parámetros de función**: argumentos pasados a la función ([[6.0 Functions]]), que operan en scope local y desaparecen al finalizar la ejecución de la función.
- **Superglobals** ([[8.2 Super Global Variables]]): variables predefinidas como `$POST`, `$_GET`, `$_SESSION`, etc., siempre disponibles en cualquier scope sin necesidad de ser importadas.
### Conceptos clave
- **Tipos de scope**: local, global, estático y parámetros de función.
- **`global` keyword**: importa variables globales al ámbito local de una función.
- **`$GLOBALS` array**: superglobal que asocia nombres de variables globales a sus valores, accesible desde cualquier scope.
- **Static variables**: declaradas con `static`, inicializadas solo una vez y retenidas entre llamadas. 
- **Arrow functions**: (PHP 7.4) Vinculan automáticamente variables del scope padre, simplificando closures.
- **`Include/Require`**: al incluir un archivo, hereda el scope del punto de inclusión, permitiendo reutilizar variables.
- **Scope de clase**: variables de clase (propiedades estáticas) accesibles dentro de métodos y heredadas en clases hijas (PHP 8.1+).
### Ejemplos prácticos
##### Scope global con `include`
```php
<?php

$a = 1;
include 'b.inc'; // $ a está disponible dentro de b.inc

?>
```
##### Scope local y advertencia de variable indefinida
```php
<?php

$a = 1; // global

function test() {
	echo $a; // Genera E_WARNING por variable indefinida
}

?>
```
##### Uso de `global`
```php
<?php

$a = 1;
$b = 2;

function sum() {
	global $a, $b;
	$b = $a + $b;
}

sum();
echo $b; // 3

?>
```
##### Acceso vía `GLOBALS`
```php
<?php 

$a = 1, $b = 2;

function sum() {
	$GLOBALS['b'] = $GLOBALS['a'] + $GLOBALS['b'];
}

sum();
echo $b; // 3

?>
```
##### Variable estática
```php
<?php function contador() {
	static $c = 0;
	echo $c;
	$c++
}

contador(); // 0
contador(); // 1

?>
```
##### Arrow function y binding de scope
```php
<?php

$x = 10;
$fn = fn() => $x; // vincula automáticamente $x
echo $fn(); // 10

?>
```

## Notas
---
- Es fundamental entender que el uso indiscriminado de variables globales puede llevar a código difícil de mantener.
- Las variables estáticas son muy útiles para contadores internos o caches simples dentro de funciones. 
- Las `arrow functions` simplifican los `closures`, pero es importante conocer también cómo funcionan las funciones anónimas tradicionales y el `use`.