El operador de coalescencia nula (`??`) fue añadido en PHP 7 ([[1.1 What is PHP]]) como azúcar sintáctico para el patrón común de ternario con `isset()` y evita avisos de variables indefinidas al comprobar nulos. Evalúa su primer operando; si existen y no es `NULL`, lo devuelve, de lo contrario retorna el segundo operando. Se puede encadenar (`$a ?? $b ?? $c`) para comprobar múltiples variables en orden de izquierda a derecha. A partir de PHP 7.4 existe además el operador de asignación de coalescencia nula (`??=`) que asignar un valor por defecto solo si la variable no estaba definida ni era `NULL`.
### Definición
El operador de coalescencia nula `expr1 ?? expr2` devuelve `expr1` si este existe y no es `NULL`; en caso contrario, devuelve `expr2`. Equivale a:
```php
isset(expr1) ? expr1 : expr2;
```
paro sin generar `E_NOTICE` si `expr1` no está definida.
### Conceptos clave
- Conversión implícita con `isset()`: Simplifica el patrón `isset($var) ? $var : $default`.
- Encadenamiento: Soporta múltiples operandos: Evalúa de izquierda a derecha hasta encontrar el primer no `NULL`.
```php
$valor = $a ?? $b ?? $c;
```
- Sin `E_NOTICE`: A diferencia del ternario, no avisa si la variable no está definida.
- Operador de asignación (`??=`): A partir de PHP 7.4
```php
$config['timeout'] ??= 30;
```
equivale a:
```php
if (!isset($config['timeout'])) {
	$config['timeout'] = 30;
}
```
- Comparación laxa: Considera `NULL` pero no otros valores "vacíos" (`0`, `''`, `false`) como iguales a `NULL`.
- Seguridad y legibilidad: Mejora la claridad del código al evitar bloques `if` ([[4.2 if-else]]) anidados y comprobaciones múltiples con `isset()` o `empty()`.
### Ejemplos prácticos
##### Asignación con valor por defecto
```php
<?php

// Asignar 'invitado' si $_GET['user'] no existe o es NULL
$usuario = $_GET['user'] ?? 'invitado';
echo $usuario;

```
##### Encadenamiento de opciones
```php
<?php

$nombre = $_POST['nombre'] ?? $_GET['nombre'] ?? 'Anónimo';
echo $nombre;

```
Evalúa primero `$_POST`, luego `$_GET` ([[8.2 Super Global Variables]]), y finalmente usa `'Anónimo'` si ambos son `NULL`.
##### Asignación condicional (`??=`)
```php
<?php

//Asigna 10 solo si $limite no está definido o en NULL
$limite ??= 10;
echo $limite;

```
Introducción en PHP 7.4 como atajo para `isset()` + asignación.
##### Evitar avisos de índices inexistentes
```php
<?php

// Sin null coalescing, esto genera E_NOTICE
// echo $_SESSION['token'];
// Con null coalescing:
echo $_SESSION['token'] ?? 'sin token';

```
No produce avisos incluso si la clave `'token'` no existe.
##### Uso de concatenaciones múltiples
```php
<?php

echo 'Tipo: ', $tipo ?? 'desconocido', "\n",
	 'Estado: ', $estado ?? 'pendiente';
	 
```
Se puede usar en `echo` con múltiples argumentos.
## Notas
---
- Cuidado al mezclar con `false` o cadenas vacías: si es necesario tratarlos como "vacíos", usa el ternario tradicional o `empty()`.
