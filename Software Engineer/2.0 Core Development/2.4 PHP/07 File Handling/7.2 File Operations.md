En PHP, las operaciones con archivos abarcan desde la lectura de datos hasta la escritura y el control de permisos, proporcionando funciones nativas y `language constructs` que facilitan estas tareas sin repetir extensiones adicionales [TutorialsPoint](https://www.tutorialspoint.com/php/php_read_file.htm?utm_source=chatgpt.com)[PHP](https://www.php.net/manual/en/function.fwrite.php?utm_source=chatgpt.com). Para leer archivos existen múltiples métodos: `file_get_contents()` para cargas completas en memoria, `fopen()` + `fread()` para lecturas binaria-seguras, `fgets()` o `fgetc()` para iterar líneas o caracteres, y `readfile()`  para volcar directamente el buffer de salida [TutorialsPoint](https://www.tutorialspoint.com/php/php_read_file.htm?utm_source=chatgpt.com)[PHP Tutorial](https://www.phptutorial.net/php-tutorial/php-read-file/?utm_source=chatgpt.com). En cuanto a la escritura `fopen` abre el flujo en modos como `"w"` o `"a"` y `fwrite()` vuelca cadenas al archivo, mientras que `file_put_contents()` combina apertura, escritura y cierre en un solo paso [PHP](https://www.php.net/manual/en/function.fwrite.php?utm_source=chatgpt.com)[TutorialsPoint](https://www.tutorialspoint.com/php/php_function_fwrite.htm?utm_source=chatgpt.com). Finalmente, el control de permisos se gestiona con funciones como `chmod()`, `is_readable()`, `is_writable()` y `fileperms()`, que permiten verificar y modificar el modo de acceso a nivel de sistema de archivos, asegurando la seguridad y correcta administración de recursos [TutorialsPoint](https://www.tutorialspoint.com/php/php_file_permissions.htm?utm_source=chatgpt.com)[PHP](https://www.php.net/manual/en/ref.filesystem.php).
## Lectura de Archivos
### Definición
La lectura de archivos en PHP consiste en abrir un recurso de archivo y extraer su contenido parcial o completamente para su procesamiento en la aplicación [TutorialsPoint](https://www.tutorialspoint.com/php/php_read_file.htm?utm_source=chatgpt.com)[PHP Tutorial](https://www.phptutorial.net/php-tutorial/php-read-file/?utm_source=chatgpt.com).
### Conceptos clave
- `file_get_contents()`: carga todo el archivo en una sola cadena (`string`) con una llamada.
- `fopen()` + `fread()`: abre el archivo con `fopen("ruta", "r")` y lee un número específico de bytes con `fread($stream, $length)`.
- `fgets()` y `fgetc()`: permiten leer línea a línea o carácter a carácter respectivamente desde el puntero de archivo.
- `readfile()`: `language construct` que emite el contenido completo al buffer de salida y retorna el número de bytes leídos.
- `feof()`: comprueba si se ha alcanzado el fin del archivo (`EOF`) para iteraciones controladas.
### Ejemplos prácticos
```php
<?php

// 1. Leer todo el archivo en una cadena
$contenido = file_get_contents('datos.txt');
echo $contenido;

// 2. Lectura parcial con fopen/fread
$fp = fopen('datos.txt', 'r');
$size = filezise('datos.txt');
$data = fread($fp, $size);
fclose($fp);

// 3. Leer línea a línea
$fp = fopen('datos.txt', 'r');
while (!feof($fp)) {
	echo fgets($fp);
}
fclose($fp);

// 4. Volcar al buffer de salida
readfile('datos.txt');

```
## Escritura de Archivos
### Definición
La escritura de archivos implica abrir el archivo en modo escritura o añadido y volcar cadenas de texto o datos binarios en él, pudiendo sobreescribir o apendizar contenido existente [PHP](https://www.php.net/manual/en/function.fwrite.php?utm_source=chatgpt.com)[TutorialsPoint](https://www.tutorialspoint.com/php/php_function_fwrite.htm?utm_source=chatgpt.com).
### Conceptos clave
- `fopen()`: modos `"w"` (sobreescribe o crea), `"a"` (apendiza), `"r+"` (lectura/escritura).
- `fwrite()`: función binaria que escribe la cadena `$data` en el recurso de archivo y devuelve los bytes escritos o `false` en fallo.
- `file_put_contents()`: atajo que combina `fopen()`, `fwrite()` y `fclose()`, con banderas `FILE_APPEND` para agregar al final.
- `flock()`: opcionalmente gestiona candados para evitar condiciones de carrera en entornos recurrentes.
### Ejemplos prácticos
```php
<?php

// 1. Escribir con fopen/fwrite
$fp = fopen('salida.txt', 'w');
fwrite($fp, "Hola mundo\n");
fclose($fp);

// 2. Apendizar con fopen/fwrite
$fp = fopen('salida.txt', 'a');
fwrite($fp, "Nueva línea\n");
fclose($fp);

// 3. Con file_put_contents (sobreescribe)
file_put_contents('salida.txt', "Contenido único\n");

// 4. Con file_put_contents y apéndice
file_put_contents('salida.txt',
	"Línea 1\nLínea 2\n",
	FILE_APPEND
);

```
## Permisos de Archivos
### Definición
Los permisos de archivos en PHP se controlan mediante funciones de la extensión `Filesystem`, permitiendo verificar atributos (`is_readable()`), (`is_writable()`) y modificar el modo de acceso con `chmod()` o consultarlo con `fileperms()` [TutorialsPoint](https://www.tutorialspoint.com/php/php_file_permissions.htm?utm_source=chatgpt.com)[PHP](https://www.php.net/manual/en/ref.filesystem.php).
### Conceptos clave
- `is_readable()`, `is_writable()`, `is_executable()`: devuelven `true` si el archivo existe y tiene el permiso correspondiente.
- `chmod(string $file, int mode)`: cambia los permiso del archivo a los valores octales especificados (p. ej. `0644`, `0755`).
- `fileperms()`: retorna un entero con las máscaras de permiso del sistema que pueden formatearse con `decoct()` para visualizar en octal.
- `umask()`: gestiona la máscara de creación predeterminada para nuevos archivos y directorios.
### Ejemplos prácticos
```php
<?php

// 1. Verifica permisos
if (is_readable('datos.txt')) {
	echo "Se puede leer\n";
}

// 2. Cambiar permisos a 0644
if (chmod('datos.txt', 0644)) {
	echo "Permisos actualizados \n";
} else {
	echo "Error al cambiar permisos\n";
}

// 3. Obtener y mostrar permisos actuales
$perms = fileperms('datos.txt');
echo 'Permisos (octal): ' . substr(sprintf('%o', $perms), -4) . "\n";

// 4. Definir umask para nuevas creaciones
umask(0022);

```
## Notas
---
- Usar `file_get_contents()` y `file_put_contents()` en scripts sencillos por ser más concisos.
- Para operaciones críticas, gestionar con `flock()` y verificar retorno de `fwrite()` para asegurar la integridad.
- Siempre manejar errores con `try/catch` y validaciones de permisos antes de leer o escribir archivos.
