> [!info] Composer (Roadmap SH)
> Composer es una herramienta fundamental en el desarrollo PHP moderno. Simplifica la gestión de las dependencias del proyecto, permitiéndote declarar lo que necesitas e instalar automáticamente esos recursos en tu proyecto. Por ejemplo, si su proyecto PHP requiere una biblioteca específica, Composer buscará la versión adecuada y se asegurará de que esté disponible para su proyecto.
> 
> `composer require vendor/package`
> 
> Este comando agrega la dependencia del `vendor/pakage` a su proyecto. Lo mismo aplica para eliminar dependencias, actualizarlas y más.

`Composer` es el gestor de dependencias estándar en PHP. Permite declarar las librerías externas que tu proyecto necesita, resolver versiones compatibles y cargarlas automáticamente (`autoloader`). Con él, dejarás atrás la inclusión manual de archivos y gestionarás actualizaciones de paquetes de forma sencilla. `Composer` mejora la reproducibilidad (misma versión en local, CI y producción) y la modularidad, al fomentar el uso de paquetes mantenidos por la comunidad.

### Contenido Clave
##### Instalación y archivo `composer.json`
```bash
# Instalación
curl -sS https://getcomposer.org/installer | php
mv composer.phar /usr/local/bin/composer
```
`composer.json`: define metadatos y dependencias
```json
{
  "name": "miempresa/mi-proyecto",
  "description": "Proyecto de ejemplo",
  "require": {
    "monolog/monolog": "^2.0",
    "guzzlehttp/guzzle": "^7.0"
  },
  "autoload": {
    "psr-4": {
      "App\\": "src/"
    }
  }
}
```
##### Comandos esenciales
Instalar dependencias:
```bash
composer install
```
Agregar un paquete:
```bash
composer require vendor/paquete:^1.2
```
Actualizar:
```bash
composer update
```
`Autoloading`:
```php
require __DIR__ . '/vendor/autoload.php';
```
##### Versionado y `SemVer`
`Composer` respeta `SemVer` (versionado semántico):
- `^1.2` acepta `>=1.2.0 <2.0.0`
- `~1.2` acepta `>=1.2.0 <1.3.0`
##### `Autoload` PSR-4
Define un `namespace` ([[11.11 Namespaces]]) a carpeta en `composer.json`, luego `Composer` genera un `autoloader` ([[18.1 PHP Framework Interoperability Group]]):
```php
// src/Utils/Helper.php
namespace App\Utils;

class Helper {
	public static function greet() {
		echo "Hello!";
	}
}

// uso en index.php
require 'vendor/autoload.php';
App\Utils\Helper::greet();
```

### Analogías
- **Supermercado de Librerías**: `Composer` es como un app que gestiona tu carrito de la compra, añades paquetes (`require`), estableces versiones, y la app descarga todo y lo guarda en tu despensa (`vendor/`).
- **Director de Orquesta**: El `composer.json` es la partitura. `Composer` lee y dirige a cada músico (paquete) para que toque (cargue) a la versión correcta y en orden.

### Ejemplos Prácticos
##### Crear un proyecto desde cero
```bash
mkdir my-project && cd my-project
composer init

# Sigue prompts para generar composer.json
composer require guzzlehttp/guzzle:^7.0
```

```php
<?php

require __DIR__ . '/vendor/autoload.php';

use GuzzleHttp\Client;

$client = new Client();
$response = $client->get('https://api.example.com/data');
echo $response->getBody();
```
##### `Autoload` para tus propias clases
```json
"autoload": {
	"psr-4": {
		"App\\": "src/"
	}
}
```

```bash
composer dump-autoload
```
