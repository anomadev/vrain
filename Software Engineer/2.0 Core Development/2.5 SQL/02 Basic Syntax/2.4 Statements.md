En SQL, las `statements` (sentencias) son instrucciones que permiten consultar y manipular datos dentro de una base de datos. 

## `SELECT`
### Definición
La sentencia `SELECT` se utiliza para extraer datos de una o más tablas. Permite especificar columnas, filtrar filas, agrupar resultados, ordenar, y combinar tablas mediante `JOINs`.

> Analogía: Imagina que tienes múltiples hojas de cálculo en una carpeta (cada hoja es una tabla). Con `SELECT` es como abrir la hoja correcta y elegir qué columnas (columnas de Excel) y qué filas quieres ver, tal como filtrar registros en un filtro de correo electrónico.

### Conceptos Clave
- Columnas y tablas
	- `SELECT columna1, columna2 ... FROM tabla;`
	- `SELECT * FROM tabla;` (todas las columnas)
- Filtrado con `WHERE`:
	- `SELECT ... FROM tabla WHERE condicion;` (ej. `WHERE edad > 30`)
	- Soporta operadores de comparación (`=`, `<`, `>`, `BETWEEN`, `IN`, `LIKE`, `IS NULL`)
- Ordenación
	- `ORDER BY column [ASC|DESC]`. Por defecto `ASC` (ascendente)
- `JOINs`
	- Combinar datos de varias tablas: `INNER JOIN`, `LEFT JOIN`, `RIGHT JOIN`, `FULL JOIN`
- Agrupación y agregados
	- `GROUP BY columna` + funciones de agregación (`COUNT()`, `SUM()`, `AVG()`, `MIN()`, ``MAX()`)
	- `HAVING` para filtrar grupos

---
### Ejemplos Prácticos
##### Listar clientes por ciudad
```sql
-- Una empresa quiere enviar una promoción solo a clientes de Ciudad de México
SELECT id_cliente, nombre, correo
FROM clientes
WHERE ciudad = 'Ciudad de México'
ORDER BY nombre ASC;
```
1. Filtra filas donde `ciudad = 'Ciudad de México'`
2. Devuelve `id_cliente`, `nombre` y `correo`
3. Ordena alfabéticamente por `nombre`
##### Obtener total de órdenes por clientes
```sql
-- Reporte mensual de cuántas órdenes hace cada cliente
SELECT c.id_cliente
	   c.nombre,
	   COUNT(o.id_orden) AS total_ordenes
FROM clientes c
LEFT JOIN ordenes o ON c.id_cliente = o.cliente_id
GROUP BY c.id_cliente, c.nombre
HAVING COUNT(o.id_orden) > 0
ORDER BY total_ordenes DESC;
```
1. `LEFT JOIN` combina todas las filas de `clientes` con sus órdenes (si existen).
2. `COUNT(o.id_orden)` calcula cuántas órdenes tiene cada cliente.
3. `HAVING COUNT > 0` muestra solo clientes con al menos una orden.
4. Ordena de mayor a menos número de órdenes.

---
## `INSERT`
La sentencia `INSERT` inserta nuevos registros en una tabla. Puede especificarse la lista de columnas o bien omitirla si se agregan valores para todas las columnas existentes.

> Analogía: Es como agregar una nueva página en un cuaderno de apuntes --Llenas todos los campos requeridos (como título, fecha, contenido) y "pegas" esa página en el cuaderno (tabla).

### Conceptos Clave
##### Con lista de columnas:
```sql
INSERT INTO tabla (col1, col2, col3)
VALUES (valor1, valor2, valor3);
```
##### Sin especificar columnas 
```sql
INSERT INTO tabla
VALUES (valor1, valor2, valor3, ...);
```
- `Auto-increment`: Si la tabla tiene una columna `SERIAL` o `AUTO_INCREMENT`, no se especifica su valor; se genera automáticamente.
##### Insertar múltiples filas
```sql
INSERT INTO tabla (col1, col2)
VALUES
	(v1a, v2a),
	(v1b, v2b),
	(v1c, v2b);
```
- Inserciones condicionales: También es posible usar `INSERT INTO ... SELECT ...` para copiar filas desde otra tabla.
### Ejemplos Prácticos
##### Agregar un nuevo producto al inventario
```sql
--  Llegó un lote nuevo de "Cafetera Eléctrica" al almacén
INSERT INTO productos (nombre, precio, cantidad, fecha_ingreso)
VALUES ('cafetera Eléctrica', 49.20, 20, '2025-05-20');
```
1. Agregar una fila a la tabla `productos`
2. Define `nombre`, `precio`, `cantidad` y `fecha_ingreso`
3. Si `id_producto` es auto-incremental, se asigna automáticamente
##### Insertar varias categorías a la vez
```sql
-- Registrar nuevas categorías en una tienda en línea
INSERT INTO categorias (nombre)
VALUES
	('Electrónica'),
	('Hogar'),
	('Oficina'),
	('Ropa');
```
- Inserta 4 filas nuevas en la tabla `categorias`, cada una con un `nombre` distinto.

---
## `DELETE`
La sentencia `DELETE` elimina registros existentes en una tabla según una condición `WHERE`. Si se omite `WHERE`, borra todas las filas de la tabla.

> Analogía: Es como arrancar una página completa de tu cuaderno; si no dices cuál página, arrancas todas las páginas (si omites `WHERE`, borras todos los registros).

### Conceptos Clave
```sql
-- Sintaxis Básica
DELETE FROM tabla
WHERE condicion;
```
- Eliminar todo: `DELETE FROM tabla;` (con cuidado: remueve todas las filas pero conserva la estructura e índices)
- `DROP` vs `DELETE`
	- `DROP TABLE tabla;` borra la tabla completa (estructura + datos)
	- `DELETE` solo remueve datos, no la estructura
- `DELETE` multi-tabla (MySQL, algunos DBMS): permite eliminar filas de varias tablas con solo `statement` (usando `JOIN` en la cláusula `FROM`).
```sql
-- Subconsultas en DELETE
DELETE FROM tabla
WHERE id IN (
	SELECT id FROM otra_tabla WHERE condicion
)
```
### Ejemplos Prácticos
##### Eliminar clientes inactivos
```sql
-- Descartar clientes que no han realizado compras en más de 5 años
DELETE FROM clientes
WHERE fecha_ultima_compra < '2020-01-01';
```
- Filtra filas donde `fecha_ultima_compra` sea anterior a `2020-01-01`
- Elimina esos registros de `clientes`
##### Borrar todas las órdenes de la tabla (vaciar la tabla)
```sql
-- Se reseteó el sistema de pruebas; se deben eliminar todas las órdenes
DELETE FROM ordenes;
```
- Elimina todas las filas de `ordenes`, dejando la tabla vacía pero lista para nuevos datos.

---
## `UPDATE`
La sentencia `UPDATE` modifica registros existentes en una tabla. Se utiliza la cláusula `SET` para indicar qué columnas cambiar y a qué valores, y `WHERE` para definir qué filas serán actualizadas.

> Analogía: Es como editar una nota en tu cuaderno; localizas la página y la línea (condición `WHERE`) y escribes el nuevo texto (nuevos valores `SET`), sin alterar el resto de la página.
### Conceptos Clave
```sql
-- Sintaxis Básica
UPDATE tabla
SET columna1 = valor1, columna2 = valor2, ...
WHERE condicion;
```
- Si omites `WHERE`, se actualiza todas la filas de la tabla. Cuidado! esto puede causar cambios no deseados
```sql
-- Actualizaciones Condicionales
UPDATE tabla 
SET columna = nuevo_valor
WHERE otra_columna = algun_valor
```
##### Actualizar según otra tabla (`JOINs` o subconsultas)
Usando subconsulta en `WHERE`
```sql
UPDATE tabla
SET columna = nuevo_valor
WHERE id IN (
	SELECT id FROM otra_tabla WHERE condicion
);
```
Usando `JOIN` (MySQL, PostgreSQL)
```sql
UPDATE tabla1 t
SET t.col = o.otro_val
FROM otra_tabla o
WHERE t.id = o.id
```
- `UPDATE` masivo vs granular: Agrupar condiciones con `AND`/`OR` para definir con precisión qué filas cambiar
- Transacciones: En buena práctica englobar múltiples `UPDATE` en la transacción (`BEGIN; ... COMMIT;`) si dependen unas de otras.
### Ejemplos Prácticos
##### Aumento de salario global
```sql
-- Aumentar un 5% a todos los empleados de la empresa
UPDATE empleados
SET salario = salario * 1.05;
```
- Multiplica cada `salario` por 1.05
- Sin `WHERE` se afecta a todos los registros
##### Actualizar estado de pedido basado en otra columna
```sql
-- Cambiar a 'Enviado' todos los pedidos cuyo stock ya esté confirmado
UPDATE pedidos p
SET estado = 'Enviado'
WHERE p.fecha_envio IS NOT NULL
	AND p.estado = 'Preparando';
```
- Filtra filas donde `fecha_envio` no sea nulo (ya empacado)
- Solo si el `estado` actual es `'Preparado'`
- Asigna `estado = 'Enviado'` a esas filas
##### Actualizar precio de producto según categoría de otra tabla
```sql
-- Aplicar 10% de descuento a todos los productos de la categoría 'Electronica'
UPDATE productos pr
SET pr.precio = pr.precio * .0.90
WHERE pr.categoria_id = (
	SELECT c.id
	FROM categorias c
	WHERE c.nombre = 'Electronica'
);
```
- La subconsulta `SELECT c.id FROM categorias c WHERE c.nombre = 'Electrónica'` obtiene el `id` de la categoría.
- Filtra productos con ese `categoria_id`
- Aplica un 10% de descuento (`precio * 0.90`)
