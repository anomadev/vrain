> [!info] FROM - Roadmap SH
> La cláusula `FROM` especifica las tablas desde las que se realizará la recuperación. Forma parte integral de las sentencias `SELECT` y sus variantes, como `SELECT INTO` y `SELECT WHERE`. `FROM` también puede usarse para unir tablas. Normalmente, `FROM` va seguido de una lista delimitada por espacios de tablas en las que se ejecutará la operación `SELECT`. Si necesita extraer datos de varias tablas, deberá separa cada tabla con una coma.

La cláusula `FROM` en `SQL` especifica de dónde toma los datos la consulta. Es el punto de partida para cualquier operación de lectura o manipulación: le dice a la base de datos "quiero trabajar con esta tabla (o tablas)". Su un `FROM`, la mayoría de las consultas no sabrían sobre qué ejecutar.

> [!info] Analogía
> Si tu consulta fuera pedir un café en una cafetería, `FROM` es como elegir la sucursal: "Quiero un café (`SELECT`) de la cafetería X (`FROM`cafetería X)".

### Conceptos Clave
##### Tabla única
```sql
-- Sentencia mínima
SELECT columna
FROM tabla;
```
Aquí `tabla` es la única fuente de datos.
##### Alias de tabla
```sql
-- Agregar un nombre corto para no repetir nombres largos
SELECT c.nombre, c.correo
FROM clientes AS c;
```
`c` reemplaza a `clientes` cada vez que quieras referirte a esa tabla
##### `JOIN` (unión de tablas)
```sql
-- INNER JOIN devuelve filas que coincidan en ambas tablas
SELECT a.col1, b.col2
FROM tabla_a AS a
INNER JOIN tabla_b AS b
	ON a.id = b.a_id;
```
`LEFT JOIN` trae todas las filas de la tabla de la izquierda, y las coincidencias de la derecha (si no hay, usa `NULL`).
```sql
SELECT c.nombre, o.total
FROM clientes AS c
LEFT JOIN ordenes AS o
	ON c.cliente_id = o.cliente_id;
```
##### Subconsulta en `FROM` (tablas derivadas)
Permite tratar el resultado de un `SELECT` como una tabla temporal:
```sql
SELECT t.cliente_id, t.total_ventas
FROM (
	SELECT cliente_id, SUM(monto) AS total_ventas
	FROM ventas
	GROUP BY clientes_id
) AS t
WHERE t.total_ventas > 1000;
```
##### `CROSS JOIN` (producto cartesiano)
Cuando pones varias tablas separadas por comas sin condición, obtienes todas las combinaciones:
```sql
SELECT *
FROM a, b;
```
En la práctica se usa mucho menos, porque produce muchos resultados inesperados.
##### Esquemas y calificación de tablas
Si la base de datos tiene esquemas (espacios de nombres), se escribe `esquema.tabla`:
```sql
SELECT *
FROM ventas.ordenes;
```

### Ejemplos Prácticos
##### Tabla única con alias
```sql
-- Ver solo nombre y correo de los clientes activos
SELECT c.nombre, c.correo
FROM clientes AS c
WHERE c.activo = TRUE;
```
- `FROM clientes AS c`: usa el alias `c` para referirse a "clientes"
- Filtra `c.activo = TRUE` y muestra `c.nombre`, `c.correo`
##### `INNER JOIN` para combinar clientes y órdenes
```sql
-- Mostrar nombre del cliente y total de cada orden
SELECT c.nombre AS cliente, o.total AS total_orden
FROM clientes AS c
INNER JOIN ordenes AS o
	ON c.cliente_id = o.cliente_id
WHERE o.fecha > '2025-01-01';
```
- `FROM clientes AS c`: "clientes" con alias `c`
- `INNER JOIN ordenes AS o ON c.cliente_id = o.cliente_id`: une las filas donde coinciden los `IDs`
- Solo muestra órdenes posteriores a enero de 2025
##### `LEFT JOIN` para incluir clientes sin órdenes
```sql
-- Listar todos los clientes y, si tienes órdenes, mostrar el total;
-- si no, que aparezca NULL
SELECT c.nombre, o.total
FROM clientes AS c
LEFT JOIN ordenes AS o
	ON c.cliente_id = o.cliente_id;
```
Trae todos los clientes (`clientes`), y añade el `total` de `ordenes` si existe. Si no, ese campo queda en `NULL`.
#### Subconsulta en `FROM`: top clientes por ventas
```sql
-- Obtener los 3 clientes con mayor monto total de ventas y luego filtrar 
-- solo los que comienzan con "A"

SELECT t.cliente_id, t.total_gastado
FROM (
	SELECT cliente_id, SUM(monto) AS total_gastado
	FROM ventas
	GROUP BY cliente_id
	ORDER BY total_gastado DESC
	LIMIT 3
) AS t
WHERE t.cliente_id IN (
	SELECT cliente_id
	FROM clientes
	WHERE nombre LIKE 'A%'
);
```
- La subconsulta interna crea una "tabla" (`t`) con los 3 clientes que más gastaron
- El `SELECT` externo filtra esos 3 para quedarse solo con los cuyos nombres comienzan con "A"
