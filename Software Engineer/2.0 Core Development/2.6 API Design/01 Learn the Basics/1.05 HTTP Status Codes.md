> [!info] HTTP Status Codes (Roadmap SH)
> Los códigos de estado HTTP son una parte esencial del diseño de API y proporcionan información importante sobre el resultado de una solicitud realizada a un servidor. Son números de 3 dígitos donde el primer dígito define la clase de respuesta, mientras que los dos últimos dígitos no tienen ningún valor de categorización. Por ejemplo, `200` representa una solicitud HTTP exitosa, mientras que `404` significa que no se pudo encontrar el recurso solicitado en el servidor. El uso eficiente de estos códigos puede mejorar la solidez de la API, haciéndola más comprensible y más fácil de depurar.

### Definición
Un Código de Estado HTTP es un número de tres dígitos que el servidor incluye en la línea de inicio de una respuesta HTTP para informar al cliente sobre el resultado de su solicitud. Cada código tiene un significado específico y va acompañado de un "texto de estado" descriptivo (ej. "OK" o "Not Found"). Estos códigos son la forma estandarizada y universal en que una API o servidor web le dice a un cliente: "Entendí tu solicitud y este fue el resultado".

### Conceptos Clave
La parte más importante a interiorizar es la clasificación de códigos. Todos los códigos se agrupan en cinco clases, identificadas por su primer dígito. Entender la clase te da el 80% de la información sobre el resultado.
- `1xx` - Respuestas Informativas: La solicitud fue recibida y el proceso continúa. Son poco comunes en el desarrollo de API REST típicas.
- `2xx` - Éxito: La solicitud fue recibida, entendida y aceptada exitosamente. Todo salió bien!
- `3xx` - Redirección: Se requiere una acción adicional por parte del cliente para completar la solicitud. Generalmente implica solicitar una URI diferente.
- `4xx` - Errores del Cliente: La solicitud contiene una sintaxis incorrecta o no puede ser procesada por el servidor. El error es "culpa" del cliente.
- `5xx` - Errores del Servidor: El servidor no pudo cumplir una solicitud aparentemente válida debido a un problema interno. El error es "culpa" del servidor.
#### Códigos esenciales que debes conocer
##### Clase `2xx` (Éxito)
- `200 OK`: El código de éxito estándar. Se usa para respuestas a `GET` y `PATCH` exitosos, o para `PUT` que modifican un recurso existente.
- `201 Created`: La solicitud fue exitosa y, como resultado, se creó un nuevo recurso. Es la respuesta ideal para un `POST` que crea un nuevo objeto. La respuesta suele incluir una cabecera `Location` con la URL del nuevo recurso.
- `204 No Content`: La solicitud fue exitosa, pero no hay contenido que devolver en el cuerpo de la respuesta. Perfecto para solicitudes `DELETE` exitosa o para `PUT`/`PATCH` que no necesitan devolver el objeto actualizado.
##### Clase `3xx` (Redirección)
- `301 Moved Permanently`: El recurso solicitado ha sido movido permanentemente a una nueva URI. Los clientes deben actualizar sus enlaces.
- `304 Not Modified`: Se usa en conjunto con cabeceras de caché. Le dice al cliente que el recurso que tiene en caché no ha cambiado, por lo que puede usar su copia local en lugar de volver a descargarlo.
##### Clase `4xx` (Error del Cliente)
- `400 Bad Request`: El servidor no puede entender la solicitud debido a una sintaxis malformada (ej. un JSON inválido en el cuerpo, parámetros faltantes).
- `401 Unauthorized`: El cliente debe autenticarse para obtener la respuesta solicitada. La solicitud carece de credenciales de autenticación válidas.
- `403 Forbidden`: El cliente está autenticado, pero no tiene permisos para acceder a este recurso. El servidor entiende la solicitud, pero se niega a autorizarla.
- `404 Not Found`: El servidor no pudo encontrar el recurso solicitado en la URI especificada.
- `429 Too Many Requests`: El usuario ha enviado demasiadas solicitudes en un período de tiempo determinado (`rate limiting`).
##### Clase `5xx` (Error del Servidor)
- `500 Internal Server Error`: Un error genérico que indica que algo salió mal en el servidor y no hay un código más específico. Es el "no sé qué pasó, pero falló".
- `503 Service Unavailable`: El servidor no está listo para manejar la solicitud. Generalmente es una condición temporal (ej. servidor sobrecargado o en mantenimiento).

### Ejemplos Prácticos
##### Solicitud `POST` exitosa para crear un usuario:
```http
HTTP/1.1 201 Created
Location: /api/users/124
Content-Type: application/json

{
  "id": "124",
  "name": "Bucky Barnes"
}
```
##### Solicitud `GET` a un recurso que no existe:
```http
HTTP/1.1 404 Not Found
Content-Type: application/json

{
  "error": "User not found"
}
```
##### Solicitud a un recurso protegido sin autenticación
```http
HTTP/1.1 401 Unauthorized
WWW-Authenticate: Bearer realm="example"
```
##### Ocurre una excepción no controlada en el servidor
```http
HTTP/1.1 500 Internal Server Error
Content-Type: application/json

{
  "error": "An unexpected error occurred on the server."
}
```

### Notas Personales
- **La semántica es tu guía**: Elegir el código de estado correcto es tan importante como elegir el método HTTP correcto. Una API que devuelve un `200 OK` con un mensaje de error en el cuerpo `{ "error": "not found" }` es un anti-patrón. La capa HTTP debe comunicar el resultado, no solo el cuerpo.
- **Los códigos de error `4xx` son para el desarrollador cliente**: Un buen mensaje de error en el cuerpo de la respuesta es vital para ayudarle a depurar.
- **Los códigos de error `5xx` son para ti (el desarrollador backend)**: El cliente no puede hacer nada para solucionarla. Es una señal para que investigues tus logs de errores.