## Definición
Los `Structured Outputs` son una técnica y capacidad de los modelos de lenguaje para generar respuestas que se ajustan estrictamente a un formato predefinido (usualmente `JSON`, `XML` o `YAML`) y a un esquema específico (como `JSON Schema`). A diferencia del texto libre, este enfoque garantiza que la salida sea legible por máquinas y pueda ser parseada programáticamente sin errores de sintaxis, permitiendo la integración directa con APIs ([[1.01 What are APIs]]) y bases de datos.

## Conceptos Clave
- `JSON Schema`: El estándar de oro para definir el contrato. Define qué llaves son obligatorias, los tipos de datos (`string`, `int`, `boolean`) y restricciones adicionales (`enums`, `regex`).
- **Function Calling / Tool Use**: La evolución de los `Structured Outputs` donde el modelo decide qué "función" llamar y rellena los argumentos según un esquema, facilitando la ejecución de acciones.
- **Constrained Decoding (Decodificación Restringida)**: A nivel de arquitectura del modelo, es la técnica que fuerza al sistema a solo elegir tokens ([[5.1.5 Common Terminology]]) que mantengan la validez del esquema (*ej. si espera un número, la probabilidad de cualquier token no numérico se reduce a cero*).
- `JSON Mode`: Una configuración de inferencia que asegura que el output sea un `JSON` válido, aunque no necesariamente siga un esquema específico (a menos que se combine con `Structured Outputs` estrictos).

## Escenarios de Aplicación e Identificación
**¿Dónde aplicarlo?**
- **Extracción de Entidades (NER)**: Convertir correos electrónicos o documentos legales en registros de base de datos limpios.
- **Agentes de API**: Actuar como traductor entre el lenguaje del usuario y los parámetros requeridos por un endpoint REST o GraphQL.
- **Clasificación Automatizada**: Etiquetar tickets de soporte o sentimientos de clientes con categorías predefinidas que el backend pueda procesar.
**¿Cómo identificarlo?**
- **Fallas de Parseo**: Si tu código lanza excepciones frecuentes tipo `Unexpected token` o `Invalid JSON`, necesitas implementar `Structured Outputs`.
- **Inconsistencia en Tipos**: Si el modelo a veces devuelve `"precio": 100` y otras `"precio": "100 USD"`, necesitas un contrato de esquema estricto.

## Notas Personales
Como arquitectos, debemos aplicar el Principio de Robustez (Ley de Postel): "*Sé conservador en lo que envías, pero liberal en lo que recibes*". Sin embargo, con los LLMs, debemos ser extremadamente conservadores en lo que recibimos. Aunque los `Structured Outputs` reducen drásticamente los errores, nunca confíes ciegamente. Siempre debe haber una capa de validación de esquema inmediatamente después de la llamada al modelo. Un `Structured Output` es una promesa, no una garantía absoluta.