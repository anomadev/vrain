## Definición
El `Prompt Ensembling` es una técnica de fiabilidad que consiste en utilizar múltiples prompts ([[5.1.2 What is a Prompt]]) diferentes para resolver la misma tarea y luego combinar sus resultados mediante una estrategia de agregación (como votación, promedio o un modelo "juez"). El objetivo es reducir la varianza y los errores individuales de un solo prompt, aprovechando que diferentes formulaciones de una instrucción puede activar distintos subconjuntos de conocimiento en el modelo.

## Conceptos Clave
- **`Prompt Diversity`**: El uso de diferentes técnicas (*ej. un prompt Zero-Shot ([[5.6.1 Zero-Shot Prompting]]), uno Few-Shot ([[5.6.2 One-Shot & Few-Shot Prompting]]) y uno Chain-of-Thought ([[5.6.7 Chain of Thought (CoT) Prompting]])*) para abordar el mismo problema desde ángulos distintos.
- **`Aggregation Function`** (Función de Agregación): La lógica que decide el resultado final.
	- `Majority Voting`: Se elige la respuesta que más se repite
	- `Weighted Averaging`: Para salidas numéricas, se promedian los resultados
	- `LLM Judge`: Un prompt adicional que actúa como mediador y elige la mejor respuesta entre las candidatas.
- **`Robustness` (Robustez)**: La capacidad del sistema para mantener un rendimiento aceptable a pesar de que uno de los prompts del "ensamble" genere una respuesta errónea.

## Escenarios de Aplicación e Identificación
**¿Dónde aplicarlo?**
- **Sistemas de Clasificación Crítica**: Por ejemplo, determinar si un log de seguridad representa una amenaza real. No quieres falsos negativos por un prompt mal redactado.
- **Extracción de Datos Estructurados**: Cuando la precisión del `JSON` es vital, pides a tres prompts que extraigan los datos y comparas si los campos clave coinciden.
- **Generación de Código**: Producir tres soluciones diferentes para un algoritmo y usar una suite de tests automáticos para elegir la que realmente funciona.
**¿Cómo identificarlo?**
- **Patrón de "Fan-out"**: El sistema dispara $N$ peticiones en paralelo para un único input del usuario.
- **Capa de Mediación**: Existe un componente de software intermedio que analiza y compara múltiples respuestas antes de entregar una al cliente.

## Notas Personales
En el diseño de sistemas de misión crítica, el Prompt Ensembling es tu seguro de vida. Sin embargo, como ingenieros, debemos ser pragmáticos: no uses un ensamble para todo. Aplícalo solo en el **20% de las tareas que generan el 80% del valor o del riegos**. Si un prompt "muere" (falla), los otros mantienen el sistema a flote.